language: node_js
node_js:
- 7.10.1
before_script:
- npm install -g gulp-cli
script: gulp
before_deploy:
- cp -r public/images deploy/
- cp -r public/scripts deploy/
- cp -r public/styles deploy/
- cp -r public/*.html deploy/
deploy:
- provider: s3
  on:
    branch: main
  access_key_id: AKIAITZUUGIJNKLB4PHA
  bucket: static.moveon.org
  skip_cleanup: true
  region: us-east-2
  acl: public_read
  local_dir: deploy
  upload-dir: giraffe
  secret_access_key:
    secure: lgA+A5aicVP2PrpNZgmBxv68whlKpFLDad+bYVsn9qO3sD6lqGqg0QmcDM2GUji6Y3NmpXkUU+ZM2qTF7PvfVTgR0SPtBsjVTckkl6ycyGVh/ASNXfbTTKxiy5NVRwXccTSNFm/MH9ju/VI1yqat45x+ppbi5MHpoBrGKBFiVTuxaj+s9sSO7pLP79a6Ul+fAU2DRm46te6JRVnIh3t/m3hDEF0s7dPcZB5DSltW3+/SjqLL+Wv6LArxZBEn2rEgx8X1mobZUFYxPvZBdKi6TT1bBqdNoGIGaF09vx+abZai+bqW3oSQkJNyTI4vdKY7Sglw9d07frATBYGyXRoTDrBb4glplgx/85NRxDQZHHYevxaMgTMz7CgqiOIomqJ/McAkC556lxxW+H5Q5r07w/Q385t0486AsnHRbjAKa8c7emjxYvFLuDvku/0VCZCwsFejE9Doa9RrHizUBzI/AsqaJMs+FmnJ9OEaoIXegXb3yushkDrmCPsnSaUdaL7rMQ5D4SbXtxH7EpPFmOmW2KfdA8Yz6bgwTYmQiIaoIOAjgQUngd05vFTw5XphfPnbIc2x1PuySpz2GVpqjMK5b3VKg0xzqX73bDVzbiRlQpA+HSvrOGcugoaWg/1CN1mfY5NwfCtcI1Q1qAd8P/p1mMvN6zWPW/aizGE6jIfXqqo=

- provider: s3
  on:
    branch: main
  access_key_id: AKIAITZUUGIJNKLB4PHA
  bucket: mop-static-stage
  skip_cleanup: true
  region: us-west-1
  acl: public_read
  local_dir: deploy
  upload-dir: giraffe
  secret_access_key:
    secure: lgA+A5aicVP2PrpNZgmBxv68whlKpFLDad+bYVsn9qO3sD6lqGqg0QmcDM2GUji6Y3NmpXkUU+ZM2qTF7PvfVTgR0SPtBsjVTckkl6ycyGVh/ASNXfbTTKxiy5NVRwXccTSNFm/MH9ju/VI1yqat45x+ppbi5MHpoBrGKBFiVTuxaj+s9sSO7pLP79a6Ul+fAU2DRm46te6JRVnIh3t/m3hDEF0s7dPcZB5DSltW3+/SjqLL+Wv6LArxZBEn2rEgx8X1mobZUFYxPvZBdKi6TT1bBqdNoGIGaF09vx+abZai+bqW3oSQkJNyTI4vdKY7Sglw9d07frATBYGyXRoTDrBb4glplgx/85NRxDQZHHYevxaMgTMz7CgqiOIomqJ/McAkC556lxxW+H5Q5r07w/Q385t0486AsnHRbjAKa8c7emjxYvFLuDvku/0VCZCwsFejE9Doa9RrHizUBzI/AsqaJMs+FmnJ9OEaoIXegXb3yushkDrmCPsnSaUdaL7rMQ5D4SbXtxH7EpPFmOmW2KfdA8Yz6bgwTYmQiIaoIOAjgQUngd05vFTw5XphfPnbIc2x1PuySpz2GVpqjMK5b3VKg0xzqX73bDVzbiRlQpA+HSvrOGcugoaWg/1CN1mfY5NwfCtcI1Q1qAd8P/p1mMvN6zWPW/aizGE6jIfXqqo=