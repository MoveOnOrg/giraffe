language: node_js
node_js:
- 7.10.1
before_script:
- npm install -g gulp-cli
script: gulp
before_deploy:
- cp -r public/images deploy/
- cp -r public/scripts deploy/
- cp -r public/styles deploy/
- cp -r public/*.html deploy/
deploy:
- provider: s3
  on:
    branch: main
  access_key_id: AKIAITZUUGIJNKLB4PHA
  bucket: static.moveon.org
  skip_cleanup: true
  region: us-east-2
  acl: public_read
  local_dir: deploy
  upload-dir: giraffe
  secret_access_key:
    secure: QMkf1qOntqnG2JrTRqP9laEEKRn0ivtSt/cDamjUFCv+169q+f0h9RBRt5rQYefzakl5Ex9jkZJ17jO+UUDmg6onV3MruHeCf9sb9+Quf5Fb5/KA4zcvoJWBKuf+SrGLqvK77XgZ20ZsHkSyMkiBO0DhvsbHjOqHzaG+d5HXYBlDM/IPOK5qXcPlXTx8AISQt5DQvjsR9sRfJdZkvfPaxmIB08dj4vYYvV8PjgAwfY0RxhJtO6vvWLklL+XpIqrIB59tXn22NSiogZtmge6sLLc1xUsGDRkOyt5TBvcnf82LFkTeJ9nhJ4Fvr1eTs5DaAd+bQJZX/85ZoPpSLsz1Y7YwoI2Z9l9bGtYKdkQJJIV2oN40X67VCjKWVe9Z6ongS50ui0b2mBddL5CJZe1aWXIy3+tpLHdg0g7c8bdgoTsFFUR6uL8xsqo603RxncgOQy+cKaqtrjjbj5s4tXfs60JU74N39SMcbbFg7E1MRIJrOqn43FvCU61PHSWc0jIYUKbwq3uvsmEI/5I3ZUm7LPxFNqf+JuhQYeQrBl4EzKUNyRScOku02uPzaPqXJ9ZhGVteMoLn+KqgXq8qWuOoGDHq+oqnwmMN0NPbLVFfSufqUyzm97HUv3p1taot3j5tshhPZMq2pWn09okkAFvwSITmE5GIx0Kw2dYeRFl+we0=

- provider: s3
  on:
    branch: main
  access_key_id: AKIAITZUUGIJNKLB4PHA
  bucket: mop-static-stage
  skip_cleanup: true
  region: us-west-1
  acl: public_read
  local_dir: deploy
  upload-dir: giraffe
  secret_access_key:
    secure: QMkf1qOntqnG2JrTRqP9laEEKRn0ivtSt/cDamjUFCv+169q+f0h9RBRt5rQYefzakl5Ex9jkZJ17jO+UUDmg6onV3MruHeCf9sb9+Quf5Fb5/KA4zcvoJWBKuf+SrGLqvK77XgZ20ZsHkSyMkiBO0DhvsbHjOqHzaG+d5HXYBlDM/IPOK5qXcPlXTx8AISQt5DQvjsR9sRfJdZkvfPaxmIB08dj4vYYvV8PjgAwfY0RxhJtO6vvWLklL+XpIqrIB59tXn22NSiogZtmge6sLLc1xUsGDRkOyt5TBvcnf82LFkTeJ9nhJ4Fvr1eTs5DaAd+bQJZX/85ZoPpSLsz1Y7YwoI2Z9l9bGtYKdkQJJIV2oN40X67VCjKWVe9Z6ongS50ui0b2mBddL5CJZe1aWXIy3+tpLHdg0g7c8bdgoTsFFUR6uL8xsqo603RxncgOQy+cKaqtrjjbj5s4tXfs60JU74N39SMcbbFg7E1MRIJrOqn43FvCU61PHSWc0jIYUKbwq3uvsmEI/5I3ZUm7LPxFNqf+JuhQYeQrBl4EzKUNyRScOku02uPzaPqXJ9ZhGVteMoLn+KqgXq8qWuOoGDHq+oqnwmMN0NPbLVFfSufqUyzm97HUv3p1taot3j5tshhPZMq2pWn09okkAFvwSITmE5GIx0Kw2dYeRFl+we0=