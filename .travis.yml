language: node_js
node_js:
- 7.10.1
before_script:
- npm install -g gulp-cli
script: gulp
before_deploy:
- cp -r public/images deploy/
- cp -r public/scripts deploy/
- cp -r public/styles deploy/
- cp -r public/*.html deploy/
deploy:
  provider: s3
  access_key_id: AKIAITZUUGIJNKLB4PHA
  secret_access_key:
    secure: TLMRNHU1yagmQRdm+54kg6Zcl2+0RlCmYX0oX2F1dmoiued35Uf9X4iG145RO/rDnZZpmUk/qiZACZKUFMCQWwZka8u0r/R4gwMRWu/4JVueTBtyqX/tuX75sUkwyhIQubHJpuYa6oBmCElGuZcl7FhbBB3mX+izH8hKhOt93UzXyxh1C/JzVFT9nFCBirpRbk1Nmwjsc82vCVIgAUV8NrlThlMzDEd00GmvXP0zr37r0mJLcCwx1de/de7SIRrkmbzuw5fI9oCOI8689AXlJcX8rPymOqWHttMgxzDXgN3TS8uqDsMXfsOizsM8apGXDF3ohQZlbD6McEnjI7tcmrPSAqfYeFTeXhPPWIhzJ0FFxfqmBxah9mEl/QPdL5rG/NBcHJVsxfO/7xCviAtU2/8BVj74SQ1yYOHOU1lpA1PFx3px0IBYrwDG4sDEISAN5I9NW16HPjhbOk43Cz4T3KeLYVcnE2Gxxjvmo6F9UZ2xgO5yBpvXn9/BJxZgbRCXQQqBkyeQfEERPJL5f0IUKFuU3XBwf1XD2w1WjFZGLVr+2hsDKU0f9b4G8nhNOItYGJOtcYfEv/a6pVWzUUkOMvB32GEWUTgsVPCX2wFVNovR1z6wN6sqiMnkroNDUR6z9eVI5hAZpp6rXfCV5E8rgmaKPc/A9BzSCoTxp3hryIE=
  bucket: static.moveon.org
  local-dir: deploy
  upload-dir: giraffe
  acl: public_read
  on:
    branch: main
  skip_cleanup: true
